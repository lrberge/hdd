<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Sorts HDD objects — hdd_setkey • hdd</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Sorts HDD objects — hdd_setkey"><meta property="og:description" content="This function sets a key to a HDD file. It creates a copy of the HDD file sorted by the key. Note that the sorting process is very time consuming."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">hdd</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/hdd_walkthrough.html">hdd walkthrough</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Sorts HDD objects</h1>
    
    <div class="hidden name"><code>hdd_setkey.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function sets a key to a HDD file. It creates a copy of the HDD file sorted by the key. Note that the sorting process is very time consuming.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">hdd_setkey</span><span class="op">(</span><span class="va">x</span>, <span class="va">key</span>, <span class="va">newfile</span>, chunkMB <span class="op">=</span> <span class="fl">500</span>, replace <span class="op">=</span> <span class="cn">FALSE</span>, verbose <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x</dt>
<dd><p>A hdd file.</p></dd>


<dt>key</dt>
<dd><p>A character vector of the keys.</p></dd>


<dt>newfile</dt>
<dd><p>Destination of the result, i.e., a destination folder that will receive the HDD data.</p></dd>


<dt>chunkMB</dt>
<dd><p>The size of chunks used to sort the data. Default is 500MB. The bigger this number the faster the sorting is (depends on your memory available though).</p></dd>


<dt>replace</dt>
<dd><p>Default is <code>FALSE</code>: if the destination folder already contains data, whether to replace it.</p></dd>


<dt>verbose</dt>
<dd><p>Numeric, default is 1. Whether to display information on the advancement of the algorithm. If equal to 0, nothing is displayed.</p></dd>

</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>This function is provided for convenience reason: it does the job of sorting the data and ensuring consistency across files, but it is very slow since it involves copying several times the entire data set. To be used parsimoniously.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>See <code><a href="hdd.html">hdd</a></code>, <code>sub-.hdd</code> and <code>cash-.hdd</code> for the extraction and manipulation of out of memory data. For importation of HDD data sets from text files: see <code><a href="txt2hdd.html">txt2hdd</a></code>.</p>
<p>See <code><a href="hdd_slice.html">hdd_slice</a></code> to apply functions to chunks of data (and create HDD objects) and <code><a href="hdd_merge.html">hdd_merge</a></code> to merge large files.</p>
<p>To create/reshape HDD objects from memory or from other HDD objects, see <code><a href="write_hdd.html">write_hdd</a></code>.</p>
<p>To display general information from HDD objects: <code><a href="origin.html">origin</a></code>, <code><a href="summary.hdd.html">summary.hdd</a></code>, <code><a href="print.hdd.html">print.hdd</a></code>, <code><a href="dim.hdd.html">dim.hdd</a></code> and <code><a href="names.hdd.html">names.hdd</a></code>.</p></div>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Laurent Berge</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Toy example with iris data</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Creating HDD data to be sorted</span></span></span>
<span class="r-in"><span><span class="va">hdd_path</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># =&gt; folder where the data will be saved</span></span></span>
<span class="r-in"><span><span class="fu"><a href="write_hdd.html">write_hdd</a></span><span class="op">(</span><span class="va">iris</span>, <span class="va">hdd_path</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Let's add data to it</span></span></span>
<span class="r-in"><span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span> <span class="fu"><a href="write_hdd.html">write_hdd</a></span><span class="op">(</span><span class="va">iris</span>, <span class="va">hdd_path</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">base_hdd</span> <span class="op">=</span> <span class="fu"><a href="hdd.html">hdd</a></span><span class="op">(</span><span class="va">hdd_path</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">base_hdd</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hard drive data of 48.7 KB. Made of 11 files.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Location: C:/Users/lrberge/AppData/Local/Temp/RtmpKImlA3/filec47846171784/</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1650 lines, 5 variables.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Sorting by Sepal.Width</span></span></span>
<span class="r-in"><span><span class="va">hdd_sorted</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># we use a very small chunkMB to show how the function works</span></span></span>
<span class="r-in"><span><span class="fu">hdd_setkey</span><span class="op">(</span><span class="va">base_hdd</span>, key <span class="op">=</span> <span class="st">"Sepal.Width"</span>,</span></span>
<span class="r-in"><span>       newfile <span class="op">=</span> <span class="va">hdd_sorted</span>, chunkMB <span class="op">=</span> <span class="fl">0.010</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Guessing R size</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 9 files...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> +</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 4</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> +</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 4</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> +</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 0</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">base_hdd_sorted</span> <span class="op">=</span> <span class="fu"><a href="hdd.html">hdd</a></span><span class="op">(</span><span class="va">hdd_sorted</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">base_hdd_sorted</span><span class="op">)</span> <span class="co"># =&gt; additional line "Sorted by:"</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hard drive data of 16.6 KB. Made of 8 files.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Sorted by: Sepal.Width </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Location: C:/Users/lrberge/AppData/Local/Temp/RtmpKImlA3/filec47831cb1ecd/</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1650 lines, 5 variables.</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">base_hdd_sorted</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       Sepal.Length Sepal.Width Petal.Length Petal.Width    Species</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                5           2          3.5           1 versicolor</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                5           2          3.5           1 versicolor</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3                5           2          3.5           1 versicolor</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> -----                                                             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1648           5.7         4.4          1.5         0.4     setosa</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1649           5.7         4.4          1.5         0.4     setosa</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1650           5.7         4.4          1.5         0.4     setosa</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Sort with two keys:</span></span></span>
<span class="r-in"><span><span class="va">hdd_sorted</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># we use a very small chunkMB to show how the function works</span></span></span>
<span class="r-in"><span><span class="fu">hdd_setkey</span><span class="op">(</span><span class="va">base_hdd</span>, key <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Species"</span>, <span class="st">"Sepal.Width"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>       newfile <span class="op">=</span> <span class="va">hdd_sorted</span>, chunkMB <span class="op">=</span> <span class="fl">0.010</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Guessing R size</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 9 files...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> +</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 4</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> +</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 4</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> +</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 3</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> .</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> +</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 0</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">base_hdd_sorted</span> <span class="op">=</span> <span class="fu"><a href="hdd.html">hdd</a></span><span class="op">(</span><span class="va">hdd_sorted</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">base_hdd_sorted</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hard drive data of 16.8 KB. Made of 8 files.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Sorted by: Species, Sepal.Width </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Location: C:/Users/lrberge/AppData/Local/Temp/RtmpKImlA3/filec478132721f/</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1650 lines, 5 variables.</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">base_hdd_sorted</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       Sepal.Length Sepal.Width Petal.Length Petal.Width   Species</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1              4.5         2.3          1.3         0.3    setosa</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2              4.5         2.3          1.3         0.3    setosa</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3              4.5         2.3          1.3         0.3    setosa</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> -----                                                            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1648           7.9         3.8          6.4           2 virginica</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1649           7.7         3.8          6.7         2.2 virginica</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1650           7.9         3.8          6.4           2 virginica</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Laurent Berge.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

